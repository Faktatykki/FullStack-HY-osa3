{"version":3,"sources":["services/persons.js","components/Persons.js","components/Personform.js","components/Filter.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","create","personObject","axios","post","then","response","data","remove","name","a","get","results","id","filter","person","delete","getAll","update","number","req","put","Person","removeName","onClick","Persons","persons","map","PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Filter","handleFilterChange","Notification","isError","note","className","App","useState","setPersons","setFilter","setResults","setNewName","setNewNumber","errorMessage","setErrorMessage","setIsError","useEffect","personService","updateNumber","window","confirm","catch","error","pIndx","findIndex","i","rIndx","updatedObject","newPersons","newResults","setTimeout","event","target","toLowerCase","match","preventDefault","some","length","createdPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.755a537f.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const req = axios.get(baseUrl)\n    return req.then(response => response.data)\n}\n\nconst create = (personObject) => {\n    const req = axios.post(baseUrl, personObject)\n    return req.then(response => response.data)\n}\n\nconst remove = async (name) => {\n    const results = await axios.get(baseUrl)\n    const id = results.data.filter(person => person.name === name)[0].id\n\n    return await axios\n          .delete(`${baseUrl}/${id}`)\n}\n\nconst update = async (name, number) => {\n    const results = await axios.get(baseUrl)\n    const id = results.data.filter(person => person.name === name)[0].id\n\n    const req = axios.put(`${baseUrl}/${id}`, {name: name, number: number})\n    return req.then(response => response.data)\n}\n\n\nexport default { create, remove, getAll, update }","import React from 'react'\n\n\nconst Persons = ({ persons, removeName }) => {\n    return(\n      <div>\n        {persons.map(person =>\n        <Person key = {person.name} \n                name = {person.name}\n                number = {person.number}\n                removeName = {removeName}/>\n        )}\n      </div>\n    ) \n}\n\nconst Person = ({ name, number, removeName }) => {\n    return(\n      <p>{name} {number} <button onClick = {() => removeName(name)}>delete</button></p>\n    )\n}\n\n\nexport default Persons\n","import React from 'react'\n\nconst PersonForm = ({ addName, newName, handleNameChange, newNumber, handleNumberChange}) => {\n    return (\n      <form onSubmit = {addName}>\n      <div>\n        name: <input \n        value = {newName}\n        onChange = {handleNameChange}/>\n        <br/>\n        number: <input\n        value = {newNumber}\n        onChange = {handleNumberChange}/>\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = ({ filter, handleFilterChange }) => {\n    return (\n      <div>\n        filter shown with<input\n        value = {filter}\n        onChange = {handleFilterChange}/>\n      </div>\n    )\n}\n\nexport default Filter\n","import React from 'react'\n\nconst Notification = ({ isError, note }) => {\n    if (note === null) {\n        return null\n    }\n    if (isError) {\n        return (\n            <div className = \"error\">\n                {note}\n            </div>\n        )\n    }\n\n    return (\n        <div className = \"allGood\">\n            {note}\n        </div>\n    )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\n\nimport Persons from './components/Persons'\nimport PersonForm from './components/Personform'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ filter, setFilter ] = useState('')\n  const [ results, setResults ] = useState(persons)\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  const [ isError, setIsError ] = useState(false)\n\n  useEffect(() => {\n      personService\n        .getAll()\n        .then(person => {\n          setPersons(person)\n          setResults(person)\n        })\n  }, [])\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n\n    if (filter === \"\") {\n      setResults(persons)\n    } else {\n      setResults(persons.filter(person => person.name.toLowerCase().match(event.target.value.toLowerCase())))\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const addName = (event) => {\n    event.preventDefault()\n    \n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    if (persons.some(person => person.name === personObject.name)) {\n      if (personObject.number.length >= 8) {\n        updateNumber(personObject.name, personObject.number)\n      } else {\n        setIsError(true)\n        setErrorMessage('Number must be at least 8 characters')\n      }\n    } else {\n      personService.create(personObject)\n      .then(createdPerson => {\n        setPersons(persons.concat(createdPerson))\n        setResults(results.concat(createdPerson))\n        \n        setErrorMessage(`Added ${createdPerson.name}`)\n      })\n      .catch(error => {\n        setIsError(true)\n        setErrorMessage(error.response.data.error)\n      })\n      \n      setNewName('')\n      setNewNumber('')\n    } \n\n    setTimeout(() => {\n      setErrorMessage(null)\n      setIsError(false)\n    }, 3000)\n  }\n\n  const removeName = (name) => {\n    if (window.confirm(`Delete ${name}?`)) {\n      personService.remove(name).catch(error => {\n      setIsError(true)\n      setErrorMessage(`Information of ${name} has already been removed from the server`)      })\n      \n      setPersons(persons.filter(person => person.name !== name))\n      setResults(persons.filter(person => person.name !== name))\n      \n      setErrorMessage(`Deleted ${name}`)\n      setTimeout(() => {\n        setErrorMessage(null)\n        setIsError(false)\n      }, 3000)\n    } \n\n    setIsError(false)\n  }\n\n  const updateNumber = (name, number) => {\n    if (window.confirm(`${name} is already added to phonebook, replace the old number with a new one?`)) {\n        setErrorMessage(`Updated ${name}`)\n\n        personService.update(name, number).catch(error => {\n          setIsError(true)\n          setErrorMessage(`Information of ${name} has already been removed from the server`)\n        })\n\n        const pIndx = persons.findIndex(i => i.name === name)\n        const rIndx = persons.findIndex(i => i.name === name)\n\n        const updatedObject = {\n          name: name,\n          number: number\n        }\n\n        const newPersons = [...persons]\n        const newResults = [...results]\n        newPersons[pIndx] = updatedObject\n        newResults[rIndx] = updatedObject\n        \n        setPersons(newPersons)\n        setResults(newResults)\n        \n        setNewName('')\n        setNewNumber('')\n\n        setTimeout(() => {\n        setErrorMessage(null)\n        setIsError(false)\n      }, 3000)\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification isError = {isError} note = {errorMessage}/>\n      <Filter filter = {filter} handleFilterChange = {handleFilterChange}/>\n      <h3>add a new</h3>\n      <PersonForm addName = {addName} \n                  newName = {newName}\n                  handleNameChange = {handleNameChange}\n                  newNumber = {newNumber}\n                  handleNumberChange = {handleNumberChange}/>\n      <h3>Numbers</h3>\n      <Persons persons = {results} removeName = {removeName}/>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}