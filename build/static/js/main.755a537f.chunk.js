(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{24:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t(19),c=t.n(a),u=(t(24),t(10)),o=t(3),i=t(6),s=t.n(i),l=t(9),m=t(4),d=t.n(m),b="/api/persons",f={create:function(e){return d.a.post(b,e).then((function(e){return e.data}))},remove:function(){var e=Object(l.a)(s.a.mark((function e(n){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(b);case 2:return t=e.sent,r=t.data.filter((function(e){return e.name===n}))[0].id,e.next=6,d.a.delete("".concat(b,"/").concat(r));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),getAll:function(){return d.a.get(b).then((function(e){return e.data}))},update:function(){var e=Object(l.a)(s.a.mark((function e(n,t){var r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(b);case 2:return r=e.sent,a=r.data.filter((function(e){return e.name===n}))[0].id,c=d.a.put("".concat(b,"/").concat(a),{name:n,number:t}),e.abrupt("return",c.then((function(e){return e.data})));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},j=t(0),h=function(e){var n=e.name,t=e.number,r=e.removeName;return Object(j.jsxs)("p",{children:[n," ",t," ",Object(j.jsx)("button",{onClick:function(){return r(n)},children:"delete"})]})},O=function(e){var n=e.persons,t=e.removeName;return Object(j.jsx)("div",{children:n.map((function(e){return Object(j.jsx)(h,{name:e.name,number:e.number,removeName:t},e.name)}))})},v=function(e){var n=e.addName,t=e.newName,r=e.handleNameChange,a=e.newNumber,c=e.handleNumberChange;return Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:t,onChange:r}),Object(j.jsx)("br",{}),"number: ",Object(j.jsx)("input",{value:a,onChange:c})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.filter,t=e.handleFilterChange;return Object(j.jsxs)("div",{children:["filter shown with",Object(j.jsx)("input",{value:n,onChange:t})]})},x=function(e){var n=e.isError,t=e.note;return null===t?null:n?Object(j.jsx)("div",{className:"error",children:t}):Object(j.jsx)("div",{className:"allGood",children:t})},w=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),i=Object(o.a)(c,2),s=i[0],l=i[1],m=Object(r.useState)(t),d=Object(o.a)(m,2),b=d[0],h=d[1],w=Object(r.useState)(""),g=Object(o.a)(w,2),N=g[0],C=g[1],S=Object(r.useState)(""),k=Object(o.a)(S,2),y=k[0],I=k[1],E=Object(r.useState)(null),A=Object(o.a)(E,2),D=A[0],T=A[1],F=Object(r.useState)(!1),J=Object(o.a)(F,2),L=J[0],B=J[1];Object(r.useEffect)((function(){f.getAll().then((function(e){a(e),h(e)}))}),[]);var G=function(e,n){if(window.confirm("".concat(e," is already added to phonebook, replace the old number with a new one?"))){T("Updated ".concat(e)),f.update(e,n).catch((function(n){B(!0),T("Information of ".concat(e," has already been removed from the server"))}));var r=t.findIndex((function(n){return n.name===e})),c=t.findIndex((function(n){return n.name===e})),o={name:e,number:n},i=Object(u.a)(t),s=Object(u.a)(b);i[r]=o,s[c]=o,a(i),h(s),C(""),I(""),setTimeout((function(){T(null),B(!1)}),3e3)}};return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(x,{isError:L,note:D}),Object(j.jsx)(p,{filter:s,handleFilterChange:function(e){l(e.target.value),h(""===s?t:t.filter((function(n){return n.name.toLowerCase().match(e.target.value.toLowerCase())})))}}),Object(j.jsx)("h3",{children:"add a new"}),Object(j.jsx)(v,{addName:function(e){e.preventDefault();var n={name:N,number:y};t.some((function(e){return e.name===n.name}))?n.number.length>=8?G(n.name,n.number):(B(!0),T("Number must be at least 8 characters")):(f.create(n).then((function(e){a(t.concat(e)),h(b.concat(e)),T("Added ".concat(e.name))})).catch((function(e){B(!0),T(e.response.data.error)})),C(""),I("")),setTimeout((function(){T(null),B(!1)}),3e3)},newName:N,handleNameChange:function(e){C(e.target.value)},newNumber:y,handleNumberChange:function(e){I(e.target.value)}}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(O,{persons:b,removeName:function(e){window.confirm("Delete ".concat(e,"?"))&&(f.remove(e).catch((function(n){B(!0),T("Information of ".concat(e," has already been removed from the server"))})),a(t.filter((function(n){return n.name!==e}))),h(t.filter((function(n){return n.name!==e}))),T("Deleted ".concat(e)),setTimeout((function(){T(null),B(!1)}),3e3)),B(!1)}})]})};c.a.render(Object(j.jsx)(w,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.755a537f.chunk.js.map